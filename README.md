# PetraQ SaaS 管理平台

PetraQ 牲畜宠物健康监测系统的 SaaS 管理后台，用于管理用户、组织、数据同步等系统级功能。

## 功能特性

### 🏠 系统概览
- 系统整体统计（用户数、动物数、组织数等）
- 同步统计和成功率监控
- 用户动物分布图表
- 最近用户和同步记录

### 👥 用户管理
- 用户的增删改查
- 用户角色管理（管理员、普通用户、查看者）
- 用户状态管理（活跃、禁用、待激活）
- 用户所属组织管理
- 查看用户下的动物数量

### 🐾 用户动物管理
- 按用户查看和管理动物
- 为指定用户添加、编辑、删除动物
- 查看动物的同步状态
- 手动触发数据同步

### 🔄 数据同步管理
- 查看所有同步记录
- 按用户筛选同步记录
- 手动触发同步任务
- 同步类型选择（全量、增量、手动）
- 同步方向选择（上传、下载）
- 同步状态监控（成功、失败、进行中）
- 同步统计和成功率

### 🏢 组织管理
- 组织的增删改查
- 组织状态管理
- 查看组织下的用户和动物统计
- 组织信息管理

### ⚙️ 系统设置
- 同步设置（自动同步、同步间隔、重试次数）
- 通知设置（邮件、推送、预警）
- 数据导入导出
- 系统信息

## 技术栈

- **React 18** - UI框架
- **TypeScript** - 类型安全
- **Ant Design 5** - UI组件库
- **React Router 6** - 路由管理
- **Recharts** - 图表库
- **Vite** - 构建工具
- **Day.js** - 日期处理

## 安装和运行

### 前置要求
- Node.js >= 16.0.0
- npm 或 yarn

### 安装依赖

```bash
cd petraq-admin
npm install
```

### 开发模式运行

```bash
npm run dev
```

应用将在 `http://localhost:3000` 启动

### 构建生产版本

```bash
npm run build
```

构建产物将输出到 `dist` 目录

### 预览生产构建

```bash
npm run preview
```

## 项目结构

```
petraq-admin/
├── src/
│   ├── components/          # 组件
│   │   └── Layout/          # 布局组件
│   ├── pages/              # 页面组件
│   │   ├── Dashboard.tsx   # 系统概览
│   │   ├── UserManagement.tsx  # 用户管理
│   │   ├── UserAnimals.tsx     # 用户动物管理
│   │   ├── DataSync.tsx        # 数据同步管理
│   │   ├── Organizations.tsx   # 组织管理
│   │   └── Settings.tsx       # 系统设置
│   ├── services/           # 服务层
│   │   └── dataManager.ts  # 数据管理服务
│   ├── types/              # 类型定义
│   │   └── index.ts
│   ├── utils/              # 工具函数
│   ├── App.tsx             # 主应用组件
│   ├── main.tsx            # 入口文件
│   └── index.css           # 全局样式
├── index.html
├── package.json
├── tsconfig.json
└── vite.config.ts
```

## 核心功能说明

### 用户管理
- 支持创建、编辑、删除用户
- 用户角色：管理员、普通用户、查看者
- 用户状态：活跃、禁用、待激活
- 可以分配用户到组织

### 用户动物管理
- 选择用户后查看该用户下的所有动物
- 可以为用户添加、编辑、删除动物
- 查看每个动物的最后同步时间
- 支持手动触发数据同步

### 数据同步
- 支持全量同步、增量同步、手动同步
- 支持上传（App → 服务器）和下载（服务器 → App）
- 实时监控同步状态
- 查看同步记录、耗时、错误信息
- 同步统计和成功率分析

### 组织管理
- 创建和管理组织/租户
- 查看组织下的用户和动物统计
- 组织状态管理

## 数据说明

应用使用模拟数据来演示功能。数据管理器 (`dataManager`) 会：

- 自动生成示例用户、组织和动物数据
- 模拟数据同步过程
- 所有数据存储在内存中，刷新页面会重置数据

## 开发说明

这是一个 SaaS 管理平台，专注于系统管理功能，而不是 iOS app 的功能复制。主要区别：

1. **管理视角**：从系统管理员的角度管理用户和数据
2. **多租户支持**：支持组织/租户管理
3. **数据同步**：管理 App 和服务器之间的数据同步
4. **用户管理**：管理使用系统的用户，而不是直接管理动物

在实际部署时，需要：
1. 连接后端API
2. 实现真实的数据持久化
3. 添加用户认证和权限管理
4. 实现真实的数据同步机制

## 浏览器支持

- Chrome (最新版本)
- Firefox (最新版本)
- Safari (最新版本)
- Edge (最新版本)

## 许可证

Copyright © 2025 PetraQ. All rights reserved.
